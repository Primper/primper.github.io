System.register("chunks:///_virtual/BoosterBomb.ts",["./rollupPluginModLoBabelHelpers.js","cc","./TileService.ts","./Field.ts","./TileAnimationService.ts","./Tile.ts","./GameManager.ts","./BoosterManager.ts"],(function(e){var t,n,i,r,o,a,c,s,u,l,f,p,h,d,v,b,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){c=e.cclegacy,s=e._decorator,u=e.Label,l=e.Node,f=e.Component},function(e){p=e.TileService},function(e){h=e.Field},function(e){d=e.TileAnimationService},function(e){v=e.Tile},function(e){b=e.GameManager},function(e){g=e.BoosterManager}],execute:function(){var m,T,w,A,y,x,B,C,S,k,E,G;c._RF.push({},"6f425bHjpVGGJfwBQb10uAf","BoosterBomb",void 0);var M=s.ccclass,z=s.property;e("BoosterBomb",(m=M("BoosterBomb"),T=z(h),w=z(u),A=z(b),m((B=t((x=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,i(t,"field",B,r(t)),i(t,"priceLabel",C,r(t)),i(t,"radius",S,r(t)),i(t,"price",k,r(t)),i(t,"cooldownTime",E,r(t)),t.tileAnimationService=new d,t.isActivated=!1,t.isCooldownActive=!1,i(t,"gameManager",G,r(t)),t}n(t,e);var c=t.prototype;return c.setPrice=function(e){this.price=e,this.priceLabel&&(this.priceLabel.string=""+this.price)},c.activate=function(){var e=this;!this.field||this.isActivated||this.isCooldownActive||(this.gameManager.coins<this.price?console.log("Недостаточно денег"):(this.isActivated=!0,this.field.node.children.forEach((function(t){t.on(l.EventType.TOUCH_START,e.onTileSelected,e)}))))},c.deactivate=function(){var e=this;console.log("BoosterBomb: деактивация началась"),this.isActivated=!1,this.field&&this.field.node.children.forEach((function(t){t.off(l.EventType.TOUCH_START,e.onTileSelected,e)}));var t=g.instance;t.selectedButton&&t.animateButtonScale(t.selectedButton.node,1),this.scheduleOnce((function(){e.node.isValid&&t.deactivateBooster()}),.5)},c.isActive=function(){return this.isActivated},c.onTileSelected=function(){var e=o(a().mark((function e(t){var n,i,r,o,c,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isActivated&&!this.isCooldownActive){e.next=2;break}return e.abrupt("return");case 2:if((n=t.target)instanceof l){e.next=5;break}return e.abrupt("return");case 5:if(i=n.getComponent(v)){e.next=8;break}return e.abrupt("return");case 8:return r=this.field.node,o=i.TileSpacing,e.next=12,this.field.forceUpdateField();case 12:return e.next=14,this.field.checkAndHandleNoGroups();case 14:if(c=p.getNeighbors(n,r,o),s=[n],c.forEach((function(e){var t=e.getComponent(v);t&&t.color===i.color&&s.push(e)})),!(s.length<3)){e.next=21;break}return console.log("Группа менее 3-х тайлов. Взрыв невозможен."),this.isCooldownActive=!1,e.abrupt("return");case 21:return this.isCooldownActive=!0,this.gameManager.subtractCoins(this.price),e.next=25,this.activateExplosion(n);case 25:this.deactivate();case 26:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),c.activateExplosion=function(){var e=o(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.getGroupInRadius(t);case 2:if(!((n=e.sent).length<3)){e.next=7;break}return console.log("Группа менее 3-х тайлов для взрыва."),this.isCooldownActive=!1,e.abrupt("return");case 7:return e.next=9,this.destroyTilesWithAnimation(n);case 9:return e.next=11,this.field.forceUpdateField();case 11:return e.next=13,this.field.checkAndHandleNoGroups();case 13:this.isCooldownActive=!1;case 14:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),c.getGroupInRadius=function(){var e=o(a().mark((function e(t){var n,i,r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=p.getTilesInRadius(t,this.radius),i=[],n.forEach((function(e){r.isTile(e)&&i.push(e)})),console.log("Тайлы в группе для взрыва",i),e.abrupt("return",i);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),c.destroyTilesWithAnimation=function(){var e=o(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==t.length){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this.tileAnimationService.animateTileDestruction(t);case 4:t.forEach((function(e){return e.destroy()}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),c.isTile=function(e){return e&&null!==e.getComponent(v)},t}(f)).prototype,"field",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(x.prototype,"priceLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),S=t(x.prototype,"radius",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),k=t(x.prototype,"price",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),E=t(x.prototype,"cooldownTime",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),G=t(x.prototype,"gameManager",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=x))||y));c._RF.pop()}}}));

System.register("chunks:///_virtual/BoosterManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./BoosterBomb.ts","./BoosterTeleport.ts","./GameManager.ts"],(function(t){var e,o,n,i,r,s,a,c,l,u,B,d,h,p,g,v,f,m;return{setters:[function(t){e=t.applyDecoratedDescriptor,o=t.inheritsLoose,n=t.createClass,i=t.initializerDefineProperty,r=t.assertThisInitialized},function(t){s=t.cclegacy,a=t._decorator,c=t.Node,l=t.Button,u=t.Sprite,B=t.Color,d=t.ProgressBar,h=t.tween,p=t.Vec3,g=t.Component},function(t){v=t.BoosterBomb},function(t){f=t.BoosterTeleport},function(t){m=t.GameManager}],execute:function(){var b,C,w,y,M,_,L,N;s._RF.push({},"165396ep7BB75SFb5FLv1n6","BoosterManager",void 0);var S=a.ccclass,T=a.property;t("BoosterManager",(b=S("BoosterManager"),C=T(c),w=T(m),b(((N=function(t){function e(){for(var e,o=arguments.length,n=new Array(o),s=0;s<o;s++)n[s]=arguments[s];return e=t.call.apply(t,[this].concat(n))||this,i(e,"boosterNode",_,r(e)),e.activeBooster=null,e.selectedButton=null,i(e,"gameManager",L,r(e)),e.buttonCooldowns=new Map,e}o(e,t);var s=e.prototype;return s.onLoad=function(){var t=this;e._instance=this;var o=this.boosterNode.getComponent(v)||this.boosterNode.getComponent(f);if(o){var n=this.boosterNode.getComponent(l);o.priceLabel&&(o.priceLabel.string=""+o.price),n&&(this.buttonCooldowns.set(n,!1),n.node.on(l.EventType.CLICK,(function(){t.buttonCooldowns.get(n)||o.isCooldownActive||t.activateBooster(o,n)}),this))}},s.activateBooster=function(t,e){var o=this;this.activeBooster!==t?(this.activeBooster&&this.deactivateBooster(),this.activeBooster=t,this.selectedButton=e,this.animateButtonScale(e.node,1.1),this.gameManager.coins<t.price?this.animateButtonScale(e.node,1):(t.activate(),this.scheduleOnce((function(){o.startButtonCooldown(e,t.cooldownTime)}),t.cooldownTime))):this.deactivateBooster()},s.startButtonCooldown=function(t,e){var o=this;this.buttonCooldowns.get(t)||(this.buttonCooldowns.set(t,!0),this.animateButtonCooldown(t.node,e),this.scheduleOnce((function(){o.buttonCooldowns.set(t,!1)}),e))},s.animateButtonCooldown=function(t,e){var o=t.getComponent(u);if(o){var n=o.color.clone(),i=new B(100,100,100);o.color=i;var r=t.getChildByName("ProgressBar");if(r){var s=r.getComponent(d);s&&(s.progress=0,h(s).to(e,{progress:1}).call((function(){o.color=n})).start())}}},s.deactivateBooster=function(){this.activeBooster&&(this.activeBooster.deactivate(),this.activeBooster=null),this.selectedButton&&(this.animateButtonScale(this.selectedButton.node,1),this.selectedButton=null)},s.animateButtonScale=function(t,e){h(t).to(.2,{scale:new p(e,e,e)}).start()},n(e,null,[{key:"instance",get:function(){return this._instance||console.error("Не инициализирован BoosterManager"),this._instance}}]),e}(g))._instance=null,_=e((M=N).prototype,"boosterNode",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=e(M.prototype,"gameManager",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=M))||y));s._RF.pop()}}}));

System.register("chunks:///_virtual/BoosterTeleport.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Field.ts","./Tile.ts","./GameManager.ts","./BoosterManager.ts"],(function(e){var t,i,n,r,o,s,a,c,l,u,d,f,h,p,T,v,b;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){a=e.cclegacy,c=e._decorator,l=e.Label,u=e.Node,d=e.tween,f=e.Vec3,h=e.Component},function(e){p=e.Field},function(e){T=e.Tile},function(e){v=e.GameManager},function(e){b=e.BoosterManager}],execute:function(){var m,g,w,y,x,k,A,B,M,C,R;a._RF.push({},"59c4eITrO5K6YCMqefn/5JX","BoosterTeleport",void 0);var z=c.ccclass,L=c.property;e("BoosterTeleport",(m=z("BoosterTeleport"),g=L(p),w=L(l),y=L(v),m((A=t((k=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),s=0;s<i;s++)o[s]=arguments[s];return t=e.call.apply(e,[this].concat(o))||this,n(t,"field",A,r(t)),n(t,"priceLabel",B,r(t)),n(t,"price",M,r(t)),n(t,"cooldownTime",C,r(t)),t.isActivated=!1,t.isCooldownActive=!1,t.selectedTiles=[],n(t,"gameManager",R,r(t)),t.isTileRemovalBlocked=!1,t}i(t,e);var a=t.prototype;return a.setPrice=function(e){this.price=e,this.priceLabel&&(this.priceLabel.string=""+this.price)},a.activate=function(){var e=this;!this.field||this.isActivated||this.isCooldownActive||this.gameManager.coins<this.price||(this.isActivated=!0,this.selectedTiles=[],this.isTileRemovalBlocked=!0,this.field.node.children.forEach((function(t){t.on(u.EventType.TOUCH_START,e.onTileSelected,e)})))},a.deactivate=function(){var e=this;this.isActivated=!1,this.selectedTiles=[],this.isTileRemovalBlocked=!1,this.field&&this.field.node.children.forEach((function(t){t.off(u.EventType.TOUCH_START,e.onTileSelected,e)}));var t=b.instance;t.selectedButton&&t.animateButtonScale(t.selectedButton.node,1),this.scheduleOnce((function(){e.node.isValid&&t.deactivateBooster()}),.5)},a.isActive=function(){return this.isActivated},a.onTileSelected=function(){var e=o(s().mark((function e(t){var i,n,r;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isActivated&&!this.isCooldownActive){e.next=2;break}return e.abrupt("return");case 2:if((i=t.target)instanceof u){e.next=5;break}return e.abrupt("return");case 5:if(n=i.getComponent(T)){e.next=8;break}return e.abrupt("return");case 8:if(!(this.selectedTiles.length<2)){e.next=16;break}if(this.selectedTiles.push(n),d(i).to(.2,{scale:new f(.8,.8,1)}).start(),2!==this.selectedTiles.length){e.next=14;break}return e.next=14,this.teleportTiles();case 14:e.next=19;break;case 16:r=this.selectedTiles[0],d(r.node).to(.2,{scale:new f(1,1,1)}).start(),this.selectedTiles=[];case 19:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),a.teleportTiles=function(){var e=o(s().mark((function e(){var t,i,n,r,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(2!==this.selectedTiles.length){e.next=14;break}return t=this.selectedTiles,i=t[0],n=t[1],e.next=4,this.animateTileDestruction(i.node,n.node);case 4:return r=i.node.position,o=n.node.position,i.node.setPosition(o),n.node.setPosition(r),e.next=10,this.animateTileGrowth(i.node,n.node);case 10:return e.next=12,this.field.forceUpdateField();case 12:return e.next=14,this.field.checkAndHandleNoGroups();case 14:this.deactivate();case 15:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a.animateTileDestruction=function(e,t){return new Promise((function(i){d(e).to(.3,{scale:new f(0,0,1)}).start(),d(t).to(.3,{scale:new f(0,0,1)}).call((function(){i()})).start()}))},a.animateTileGrowth=function(e,t){return new Promise((function(i){d(e).to(.3,{scale:new f(1,1,1)}).start(),d(t).to(.3,{scale:new f(1,1,1)}).call((function(){i()})).start()}))},t}(h)).prototype,"field",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(k.prototype,"priceLabel",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(k.prototype,"price",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),C=t(k.prototype,"cooldownTime",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),R=t(k.prototype,"gameManager",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=k))||x));a._RF.pop()}}}));

System.register("chunks:///_virtual/Field.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Tile.ts","./TileAnimationService.ts","./TileService.ts","./GameManager.ts"],(function(e){var t,i,n,r,a,s,o,c,l,u,f,h,p,d,g,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized,a=e.asyncToGenerator,s=e.regeneratorRuntime},function(e){o=e.cclegacy,c=e._decorator,l=e.Prefab,u=e.instantiate,f=e.Vec3,h=e.Component},function(e){p=e.Tile},function(e){d=e.TileAnimationService},function(e){g=e.TileService},function(e){m=e.GameManager}],execute:function(){var b,v,T,k,x,S,y,w,A,M,F,P;o._RF.push({},"bbacavJwW1Iqqf9qsTz1e/r","Field",void 0);var I=c.ccclass,N=c.property;e("Field",(b=I("Field"),v=N(m),T=N([l]),k=N({tooltip:"Количество перемешиваний"}),b((y=t((S=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,n(t,"gameManager",y,r(t)),n(t,"tilePrefabs",w,r(t)),n(t,"fieldWidth",A,r(t)),n(t,"fieldHeight",M,r(t)),n(t,"TileSpacing",F,r(t)),n(t,"shuffleCount",P,r(t)),t.fieldNode=null,t.tileAnimationService=new d,t.isAnimating=!1,t}i(t,e);var o=t.prototype;return o.onLoad=function(){this.fieldNode=this.node},o.initializeField=function(){this.generateField()},o.generateField=function(){for(var e=0;e<this.fieldHeight;e++)for(var t=0;t<this.fieldWidth;t++)this.spawnTileAt(t,e)},o.getMatchingGroups=function(){return this.findMatchingGroups()},o.forceUpdateField=function(){var e=a(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.shiftTilesDown();case 2:return e.next=4,this.refillField();case 4:return e.next=6,this.checkAndHandleNoGroups();case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.spawnTileAt=function(e,t){var i=this.tilePrefabs[Math.floor(Math.random()*this.tilePrefabs.length)],n=u(i);n.setParent(this.fieldNode),n.setPosition(new f(e*this.TileSpacing,t*this.TileSpacing,0)),n.getComponent(p).TileSpacing=this.TileSpacing},o.blockTileInteractions=function(){this.isAnimating=!0},o.unblockTileInteractions=function(){this.isAnimating=!1},o.isFieldAnimating=function(){return this.isAnimating},o.shiftTilesDown=function(){var e=a(s().mark((function e(){var t,i,n=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isAnimating){e.next=2;break}return e.abrupt("return");case 2:if(this.blockTileInteractions(),!this.checkForEmptySpaces()){e.next=10;break}if(t=g.groupTilesByColumns(this.fieldNode,this.TileSpacing),i=[],Object.keys(t).forEach((function(e){var r=t[parseInt(e)];r.sort((function(e,t){return e.position.y-t.position.y}));var a=0;r.forEach((function(e){e.position.y!==a&&i.push(n.tileAnimationService.animateTileShift(e,a)),a+=n.TileSpacing}))})),!(i.length>0)){e.next=10;break}return e.next=10,Promise.all(i);case 10:this.unblockTileInteractions();case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.refillField=function(){var e=a(s().mark((function e(){var t,i,n,r,a,o,c,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isAnimating){e.next=2;break}return e.abrupt("return");case 2:this.blockTileInteractions(),t=g.groupTilesByColumns(this.fieldNode,this.TileSpacing),e.t0=s().keys(t);case 5:if((e.t1=e.t0()).done){e.next=26;break}i=e.t1.value,n=t[i],r=n.length*this.TileSpacing;case 9:if(!(r<this.fieldHeight*this.TileSpacing)){e.next=24;break}if(a=this.tilePrefabs[Math.floor(Math.random()*this.tilePrefabs.length)]){e.next=13;break}return e.abrupt("continue",9);case 13:return(o=u(a)).setParent(this.fieldNode),c=new f(parseInt(i)*this.TileSpacing,r,0),o.setPosition(c),(l=o.getComponent(p))&&(l.TileSpacing=this.TileSpacing),e.next=21,this.tileAnimationService.animateTileShift(o,r);case 21:r+=this.TileSpacing,e.next=9;break;case 24:e.next=5;break;case 26:return this.unblockTileInteractions(),e.next=29,this.checkAndHandleNoGroups();case 29:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.handleTileRemoval=function(){var e=a(s().mark((function e(t){var i=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isAnimating){e.next=2;break}return e.abrupt("return");case 2:this.blockTileInteractions(),this.gameManager&&(this.gameManager.incrementScore(t),this.gameManager.incrementMoves()),this.scheduleOnce(a(s().mark((function e(){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.shiftTilesDown();case 2:return e.next=4,i.refillField();case 4:return e.next=6,i.forceUpdateField();case 6:i.unblockTileInteractions();case 7:case"end":return e.stop()}}),e)}))),.1);case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}(),o.shuffleField=function(){var e=a(s().mark((function e(){var t,i,n,r,a=this;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isAnimating){e.next=2;break}return e.abrupt("return");case 2:return this.blockTileInteractions(),t=this.fieldNode.children,i=t.map((function(e){return a.tileAnimationService.animateShrink(e)})),e.next=7,Promise.all(i);case 7:return n=this.shuffleArray([].concat(t)),r=n.map((function(e,t){var i=new f(t%a.fieldWidth*a.TileSpacing,Math.floor(t/a.fieldWidth)*a.TileSpacing,0);return e.setPosition(i),a.tileAnimationService.animateExpand(e,i)})),e.next=11,Promise.all(r);case 11:return this.unblockTileInteractions(),e.next=14,this.checkAndHandleNoGroups();case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.shuffleArray=function(e){for(var t=this,i=e.length-1;i>0;i--){var n=Math.floor(Math.random()*(i+1)),r=[e[n],e[i]];e[i]=r[0],e[n]=r[1]}return this.fieldNode.removeAllChildren(),e.forEach((function(e){t.fieldNode.addChild(e)})),e},o.findMatchingGroups=function(){var e=[],t=new Set;return this.fieldNode.children.forEach((function(i){if(!t.has(i)){var n=i.getComponent(p).getConnectedTiles(i,i.getComponent(p).color,t);n.length>=p.getK()&&e.push(n)}})),e},o.checkAndHandleNoGroups=function(){var e=a(s().mark((function e(){var t;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==this.findMatchingGroups().length){e.next=13;break}t=0;case 3:if(!(t<this.shuffleCount)){e.next=12;break}return e.next=6,this.shuffleField();case 6:if(!(this.findMatchingGroups().length>0)){e.next=9;break}return e.abrupt("return");case 9:t++,e.next=3;break;case 12:this.gameManager.endGame(!1);case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),o.checkForEmptySpaces=function(){var e=this,t=!1,i=g.groupTilesByColumns(this.fieldNode,this.TileSpacing);return Object.keys(i).forEach((function(n){i[parseInt(n)].length<e.fieldHeight&&(t=!0)})),t},t}(h)).prototype,"gameManager",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=t(S.prototype,"tilePrefabs",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),A=t(S.prototype,"fieldWidth",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 8}}),M=t(S.prototype,"fieldHeight",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 8}}),F=t(S.prototype,"TileSpacing",[N],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 70}}),P=t(S.prototype,"shuffleCount",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),x=S))||x));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./UIUpdater.ts","./ResultScreen.ts"],(function(e){var t,i,o,r,n,a,s,l,u,c,h,b,p;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,o=e.createClass,r=e.initializerDefineProperty,n=e.assertThisInitialized},function(e){a=e.cclegacy,s=e._decorator,l=e.Prefab,u=e.find,c=e.instantiate,h=e.Component},function(e){b=e.UIUpdater},function(e){p=e.ResultScreen}],execute:function(){var m,f,g,d,C,v,L,y,w,P,S,z,U,G,T,_,x,M,B,O,R,I,Y,D,F,j,k,q,A,H,Q,W,E,J,K,N,V,X,Z;a._RF.push({},"1fe22yqhUhFYYmIPQRij/9q","GameManager",void 0);var $=s.ccclass,ee=s.property;e("GameManager",(m=$("GameManager"),f=ee({tooltip:"Текстовый Label для отображения счета"}),g=ee({tooltip:"Текстовый Label для отображения количества оставшихся ходов"}),d=ee({tooltip:"Текстовый Label для отображения количества монет"}),C=ee({tooltip:"Текстовый Label для отображения целевого количества очков"}),v=ee({tooltip:"Точка для отображения изменений в счете"}),L=ee({tooltip:"Точка для отображения комбо-эффекта"}),y=ee({tooltip:"Префаб для анимации изменения счета"}),w=ee({tooltip:"Префаб для анимации комбо"}),P=ee({tooltip:"Прогресс-бар для отображения прогресса в достижении целевого количества очков"}),S=ee({tooltip:"Минимальное количество очков для обычного комбо"}),z=ee({tooltip:"Минимальное количество очков для мега комбо"}),U=ee({tooltip:"Количество монет за обычное комбо"}),G=ee({tooltip:"Количество монет за мега комбо"}),T=ee({tooltip:"Цель (целевое количество очков)"}),_=ee({tooltip:"Количество ходов"}),x=ee({type:l,tooltip:"Префаб экрана конца игры"}),M=ee({tooltip:"Текст для экрана победы"}),B=ee({tooltip:"Текст для экрана поражения"}),m((I=t((R=function(e){function t(){for(var t,i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return t=e.call.apply(e,[this].concat(o))||this,r(t,"scoreLabel",I,n(t)),r(t,"movesLabel",Y,n(t)),r(t,"coinsLabel",D,n(t)),r(t,"targetScoreLabel",F,n(t)),r(t,"scoreChangePoint",j,n(t)),r(t,"comboPoint",k,n(t)),r(t,"scoreChangePrefab",q,n(t)),r(t,"comboPrefab",A,n(t)),r(t,"progressBar",H,n(t)),r(t,"normalComboThreshold",Q,n(t)),r(t,"megaComboThreshold",W,n(t)),r(t,"normalComboCoins",E,n(t)),r(t,"megaComboCoins",J,n(t)),r(t,"targetScore",K,n(t)),r(t,"movesLimit",N,n(t)),r(t,"resultScreenPrefab",V,n(t)),r(t,"winText",X,n(t)),r(t,"loseText",Z,n(t)),t.uiUpdater=void 0,t.score=0,t.moves=0,t._coins=0,t.isGameOver=!1,t}i(t,e);var a=t.prototype;return a.start=function(){this.uiUpdater=new b(this.scoreLabel,this.movesLabel,this.targetScoreLabel,this.scoreChangePoint,this.comboPoint,this.scoreChangePrefab,this.comboPrefab,this.coinsLabel,this.progressBar),this.resetGame()},a.resetGame=function(){this.score=0,this.moves=0,this._coins=0,this.isGameOver=!1,this.uiUpdater.updateScore(this.score),this.uiUpdater.updateMoves(this.movesLimit),this.uiUpdater.updateProgressBar(this.score,this.targetScore),this.uiUpdater.updateCoins(this._coins)},a.addCoins=function(e){this._coins+=e},a.subtractCoins=function(e){this.coins-=e,this.coins<0&&(this.coins=0),this.updateCoinsLabel()},a.incrementScore=function(e){if(!this.isGameOver){var t=this.score;this.score+=e,this.uiUpdater.animateScoreChange(t,this.score,1),this.uiUpdater.showScoreChange(e);var i=0;e>=this.megaComboThreshold?(this.uiUpdater.showCombo(e,this.megaComboCoins,!0),i=this.megaComboCoins):e>=this.normalComboThreshold&&(this.uiUpdater.showCombo(e,this.normalComboCoins,!1),i=this.normalComboCoins),i>0&&(this._coins+=i,this.uiUpdater.updateCoins(this._coins)),this.uiUpdater.updateProgressBar(this.score,this.targetScore),this.score>=this.targetScore&&this.endGame(!0)}},a.incrementMoves=function(){if(!(this.isGameOver||this.moves>=this.movesLimit)){this.moves++;var e=this.movesLimit-this.moves;this.uiUpdater.updateMoves(e),this.moves>=this.movesLimit&&this.endGame(!1)}},a.endGame=function(e){if(!this.isGameOver&&(this.isGameOver=!0,this.resultScreenPrefab)){var t=u("Canvas");if(t){var i=c(this.resultScreenPrefab);i.setParent(t),i.setPosition(0,0,0);var o=i.getComponent(p);if(o){var r=e?this.winText:this.loseText;o.setResultText(r)}}}},a.updateTargetScore=function(e){this.isGameOver||(this.targetScore=e,this.uiUpdater.updateProgressBar(this.score,this.targetScore))},a.updateCoinsLabel=function(){this.coinsLabel&&(this.coinsLabel.string=""+this.coins)},o(t,[{key:"coins",get:function(){return this._coins},set:function(e){this._coins=e,this.updateCoinsLabel()}}]),t}(h)).prototype,"scoreLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Y=t(R.prototype,"movesLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=t(R.prototype,"coinsLabel",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(R.prototype,"targetScoreLabel",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),j=t(R.prototype,"scoreChangePoint",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=t(R.prototype,"comboPoint",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),q=t(R.prototype,"scoreChangePrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(R.prototype,"comboPrefab",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),H=t(R.prototype,"progressBar",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),Q=t(R.prototype,"normalComboThreshold",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 5}}),W=t(R.prototype,"megaComboThreshold",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),E=t(R.prototype,"normalComboCoins",[U],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),J=t(R.prototype,"megaComboCoins",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),K=t(R.prototype,"targetScore",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1e3}}),N=t(R.prototype,"movesLimit",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),V=t(R.prototype,"resultScreenPrefab",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),X=t(R.prototype,"winText",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"You Win"}}),Z=t(R.prototype,"loseText",[B],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return"You Loose"}}),O=R))||O));a._RF.pop()}}}));

System.register("chunks:///_virtual/IBooster.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"7598737rdRBhK1i0mjVlvBJ","IBooster",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/IUIUpdater.ts",["cc"],(function(){var t;return{setters:[function(e){t=e.cclegacy}],execute:function(){t._RF.push({},"db09fo9g1dOkK5AfkHRSgJJ","IUIUpdater",void 0),t._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./BoosterBomb.ts","./BoosterManager.ts","./BoosterTeleport.ts","./IBooster.ts","./Field.ts","./GameManager.ts","./IUIUpdater.ts","./MenuManager.ts","./ResultScreen.ts","./SceneIntroAnimation.ts","./Tile.ts","./TileAnimationService.ts","./TileService.ts","./UIUpdater.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/MenuManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,r,a,o,i,u,s,c;return{setters:[function(t){e=t.applyDecoratedDescriptor,n=t.inheritsLoose,r=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,i=t._decorator,u=t.Button,s=t.director,c=t.Component}],execute:function(){var l,p,f,h,y;o._RF.push({},"877e7m83tNKoqraRNg9NuAv","MenuManager",void 0);var g=i.ccclass,v=i.property;t("MenuManager",(l=g("MenuManager"),p=v({type:u}),l((y=e((h=function(t){function e(){for(var e,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o))||this,r(e,"startButton",y,a(e)),e}n(e,t);var o=e.prototype;return o.start=function(){this.startButton&&this.startButton.node.on(u.EventType.CLICK,this.startGame,this)},o.startGame=function(){s.loadScene("GameScene")},e}(c)).prototype,"startButton",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),f=h))||f));o._RF.pop()}}}));

System.register("chunks:///_virtual/ResultScreen.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var t,n,r,o,i,u,l,s,a,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,r=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){i=e.cclegacy,u=e._decorator,l=e.Label,s=e.Button,a=e.director,c=e.Component}],execute:function(){var p,f,h,y,b,g,m;i._RF.push({},"93a0aBlBDxBn4UZlQknWEe3","ResultScreen",void 0);var B=u.ccclass,d=u.property;e("ResultScreen",(p=B("ResultScreen"),f=d({type:l,tooltip:"Текст результата"}),h=d({type:s,tooltip:"Кнопка перехода в меню"}),p((g=t((b=function(e){function t(){for(var t,n=arguments.length,i=new Array(n),u=0;u<n;u++)i[u]=arguments[u];return t=e.call.apply(e,[this].concat(i))||this,r(t,"resultLabel",g,o(t)),r(t,"menuButton",m,o(t)),t}n(t,e);var i=t.prototype;return i.start=function(){a.pause(),this.menuButton&&this.menuButton.node.on(s.EventType.CLICK,this.goToMenu,this)},i.setResultText=function(e){this.resultLabel&&(this.resultLabel.string=e)},i.goToMenu=function(){a.resume(),a.loadScene("Menu")},t}(c)).prototype,"resultLabel",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(b.prototype,"menuButton",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=b))||y));i._RF.pop()}}}));

System.register("chunks:///_virtual/SceneIntroAnimation.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Field.ts"],(function(e){var t,n,i,o,r,a,s,l,c,m,u,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,o=e.assertThisInitialized,r=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){s=e.cclegacy,l=e._decorator,c=e.Node,m=e.Component,u=e.tween},function(e){f=e.Field}],execute:function(){var p,h,y,F,v,b,d,g,w,P,z,E,I,R,x;s._RF.push({},"1cbd1sw9CRDJrXj8RbqOu6z","SceneIntroAnimation",void 0);var L=l.ccclass,A=l.property;e("SceneIntroAnimation",(p=L("SceneIntroAnimation"),h=A([c]),y=A([c]),F=A([c]),v=A([c]),b=A({type:f}),d=A({tooltip:"Время анимации для каждого элемента"}),p((P=t((w=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return t=e.call.apply(e,[this].concat(r))||this,i(t,"elementsFromLeft",P,o(t)),i(t,"elementsFromRight",z,o(t)),i(t,"elementsFromTop",E,o(t)),i(t,"elementsFromBottom",I,o(t)),i(t,"field",R,o(t)),i(t,"animationDuration",x,o(t)),t.elementInitialPositions=new Map,t}n(t,e);var s=t.prototype;return s.onLoad=function(){this.saveInitialPositions(),this.placeElementsOffScreen()},s.start=function(){var e=this;this.playIntroAnimation().then((function(){e.field&&e.field.initializeField()}))},s.saveInitialPositions=function(){var e=this;[].concat(this.elementsFromLeft,this.elementsFromRight,this.elementsFromTop,this.elementsFromBottom).forEach((function(t){e.elementInitialPositions.set(t,t.position.clone())}))},s.placeElementsOffScreen=function(){this.elementsFromLeft.forEach((function(e){var t=e.position.clone();e.setPosition(t.x-1e3,t.y,t.z)})),this.elementsFromRight.forEach((function(e){var t=e.position.clone();e.setPosition(t.x+1e3,t.y,t.z)})),this.elementsFromTop.forEach((function(e){var t=e.position.clone();e.setPosition(t.x,t.y+1e3,t.z)})),this.elementsFromBottom.forEach((function(e){var t=e.position.clone();e.setPosition(t.x,t.y-1e3,t.z)}))},s.playIntroAnimation=function(){var e=r(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[this.animateElements(this.elementsFromLeft),this.animateElements(this.elementsFromRight),this.animateElements(this.elementsFromTop),this.animateElements(this.elementsFromBottom)],e.next=3,Promise.all(t);case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),s.animateElements=function(){var e=r(a().mark((function e(t){var n,i=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.map((function(e,t){var n=i.elementInitialPositions.get(e);if(!n)return Promise.resolve();var o=.1*t;return new Promise((function(t){u(e).delay(o).to(i.animationDuration,{position:n},{easing:"quadOut"}).call((function(){return t()})).start()}))})),e.next=3,Promise.all(n);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t}(m)).prototype,"elementsFromLeft",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),z=t(w.prototype,"elementsFromRight",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),E=t(w.prototype,"elementsFromTop",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),I=t(w.prototype,"elementsFromBottom",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),R=t(w.prototype,"field",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=t(w.prototype,"animationDuration",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),g=w))||g));s._RF.pop()}}}));

System.register("chunks:///_virtual/Tile.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Field.ts","./TileAnimationService.ts","./TileService.ts"],(function(e){var n,t,i,r,o,a,c,s,u,l,p,f,h,d;return{setters:[function(e){n=e.applyDecoratedDescriptor,t=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.asyncToGenerator,a=e.regeneratorRuntime},function(e){c=e.cclegacy,s=e._decorator,u=e.Node,l=e.Vec3,p=e.Component},function(e){f=e.Field},function(e){h=e.TileAnimationService},function(e){d=e.TileService}],execute:function(){var v,T,m,g,y;c._RF.push({},"e00e1HyvZFKWJOPMES1M4f+","Tile",void 0);var S=s.ccclass,A=s.property;e("Tile",S("Tile")(((y=function(e){function n(){for(var n,t=arguments.length,o=new Array(t),a=0;a<t;a++)o[a]=arguments[a];return n=e.call.apply(e,[this].concat(o))||this,i(n,"color",m,r(n)),i(n,"TileSpacing",g,r(n)),n.fieldNode=null,n.tileAnimationService=new h,n}t(n,e);var c=n.prototype;return c.start=function(){this.fieldNode=this.node.parent,this.initializeTileAppearance(),this.node.on(u.EventType.TOUCH_START,this.onTileClicked,this)},n.getK=function(){return n.K},c.initializeTileAppearance=function(){this.tileAnimationService.animateScale(this.node,new l(0,0,0),new l(1,1,1),.3)},c.onTileClicked=function(){var e=o(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.fieldNode.getComponent(f)).isFieldAnimating()){e.next=3;break}return e.abrupt("return");case 3:return t.blockTileInteractions(),e.next=6,this.findAndRemoveMatchingTiles();case 6:t.unblockTileInteractions();case 7:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),c.removeTilesWithAnimation=function(){var e=o(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.fieldNode.getComponent(f),e.next=3,this.tileAnimationService.animateTileDestruction(n);case 3:return e.next=5,this.shiftTilesDown();case 5:t.unblockTileInteractions(),this.notifyFieldAndUpdateScore(n.length);case 7:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),c.findAndRemoveMatchingTiles=function(){var e=o(a().mark((function e(){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((t=this.getConnectedTiles(this.node,this.color,new Set)).length>=n.K)){e.next=5;break}return n.isAnimating=!0,e.next=5,this.removeTilesWithAnimation(t);case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),c.notifyFieldAndUpdateScore=function(){var e=o(a().mark((function e(n){var t;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.fieldNode.getComponent(f)){e.next=4;break}return console.error("Компонент Field не найден"),e.abrupt("return");case 4:return e.next=6,t.handleTileRemoval(n);case 6:case"end":return e.stop()}}),e,this)})));return function(n){return e.apply(this,arguments)}}(),c.getConnectedTiles=function(e,t,i){for(var r=[],o=[e];o.length>0;){var a=o.pop();if(!i.has(a))i.add(a),r.push(a),d.getNeighbors(a,this.fieldNode,this.TileSpacing).forEach((function(e){i.has(e)||e.getComponent(n).color!==t||o.push(e)}))}return r},c.shiftTilesDown=function(){var e=o(a().mark((function e(){var t,i,r=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.isAnimating){e.next=2;break}return e.abrupt("return");case 2:return t=d.groupTilesByColumns(this.fieldNode,this.TileSpacing),i=[],Object.keys(t).forEach((function(e){var n=t[parseInt(e)];n.sort((function(e,n){return e.position.y-n.position.y}));var o=0;n.forEach((function(e){e.position.y!==o&&i.push(r.tileAnimationService.animateTileShift(e,o)),o+=r.TileSpacing}))})),e.next=7,Promise.all(i);case 7:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),n}(p)).K=3,y.isAnimating=!1,m=n((T=y).prototype,"color",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return""}}),g=n(T.prototype,"TileSpacing",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),v=T))||v);c._RF.pop()}}}));

System.register("chunks:///_virtual/TileAnimationService.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var t,e,r,i,u;return{setters:[function(n){t=n.asyncToGenerator,e=n.regeneratorRuntime},function(n){r=n.cclegacy,i=n.tween,u=n.Vec3}],execute:function(){r._RF.push({},"c10b8S+pyZBp4z/EU/2mkdp","TileAnimationService",void 0);n("TileAnimationService",function(){function n(){}var r=n.prototype;return r.animateScale=function(n,t,e,r){return new Promise((function(u){i(n).set({scale:t}).to(r,{scale:e}).call((function(){return u()})).start()}))},r.animateTileShift=function(){var n=t(e().mark((function n(t,r){return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){i(t).to(.2,{position:new u(t.position.x,r,0)}).call((function(){return n()})).start()})));case 1:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),r.animateTileDestruction=function(n){var t=this;return new Promise((function(e){Promise.all(n.map((function(n){return t.animateScale(n,new u(1,1,1),new u(0,0,0),.1).then((function(){return n.destroy()}))}))).then((function(){return e()}))}))},r.animateTileAppear=function(n){return new Promise((function(t){i(n).set({scale:new u(0,0,0)}).to(.1,{scale:new u(1,1,1)}).call((function(){return t()})).start()}))},r.animateShrink=function(){var n=t(e().mark((function n(t){return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){i(t).to(.2,{scale:new u(0,0,0)}).call((function(){return n()})).start()})));case 1:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}(),r.animateExpand=function(){var n=t(e().mark((function n(t,r){return e().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.abrupt("return",new Promise((function(n){i(t).to(.2,{scale:new u(1,1,1)}).to(.2,{position:r}).call((function(){return n()})).start()})));case 1:case"end":return n.stop()}}),n)})));return function(t,e){return n.apply(this,arguments)}}(),n}());r._RF.pop()}}}));

System.register("chunks:///_virtual/TileService.ts",["cc","./Tile.ts"],(function(i){var n,t,e;return{setters:[function(i){n=i.cclegacy,t=i.Vec3},function(i){e=i.Tile}],execute:function(){n._RF.push({},"5c7aftzHi9EMbhTvRH3OMlw","TileService",void 0);i("TileService",function(){function i(){}return i.groupTilesByColumns=function(i,n){var t={};return i.children.forEach((function(i){var e=Math.round(i.position.x/n);t[e]||(t[e]=[]),t[e].push(i)})),t},i.getNeighbors=function(i,n,t){return n.children.filter((function(n){var e=Math.abs(i.position.x-n.position.x),o=Math.abs(i.position.y-n.position.y);return e===t&&0===o||o===t&&0===e}))},i.getTilesInRadius=function(i,n){var o=i.parent,r=i.getComponent(e).TileSpacing,c=[],u=i.position;return o.children.forEach((function(i){t.distance(u,i.position)<=n*r&&c.push(i)})),c},i}());n._RF.pop()}}}));

System.register("chunks:///_virtual/UIUpdater.ts",["cc"],(function(t){var e,o,s,n,a;return{setters:[function(t){e=t.cclegacy,o=t.tween,s=t.instantiate,n=t.Label,a=t.Vec3}],execute:function(){e._RF.push({},"fb802nfyL1N07Ld/gFseOuu","UIUpdater",void 0);t("UIUpdater",function(){function t(t,e,o,s,n,a,i,r,c){this.scoreLabel=t,this.movesLabel=e,this.targetScoreLabel=o,this.scoreChangePoint=s,this.comboPoint=n,this.scoreChangePrefab=a,this.comboPrefab=i,this.coinsLabel=r,this.progressBar=c}var e=t.prototype;return e.updateScore=function(t){this.scoreLabel&&(this.scoreLabel.string=""+t)},e.updateMoves=function(t){this.movesLabel&&(this.movesLabel.string=""+t)},e.updateProgressBar=function(t,e){if(this.progressBar){var s=Math.min(t/e,1);o(this.progressBar).to(.5,{progress:s},{easing:"quadOut"}).start()}this.targetScoreLabel&&(this.targetScoreLabel.string=""+e)},e.updateCoins=function(t){this.coinsLabel&&(this.coinsLabel.string=""+t)},e.showCombo=function(t,e,i){if(this.comboPrefab){var r=s(this.comboPrefab);this.comboPoint.addChild(r);var c=r.getComponent(n);c&&(c.string=i?"Mega Combo!":"Combo!"),r.setPosition(new a(0,0,0)),o(r).to(.2,{scale:new a(1.5,1.5,1)}).to(.2,{scale:new a(1,1,1)}).delay(.5).to(.5,{position:new a(0,130,0)}).call((function(){return r.destroy()})).start()}},e.showScoreChange=function(t){if(this.scoreChangePrefab){var e=s(this.scoreChangePrefab);this.scoreChangePoint.addChild(e);var i=e.getComponent(n);i&&(i.string="+"+t),e.setPosition(new a(0,0,0)),e.setScale(new a(0,0,0)),o(e).to(.2,{scale:new a(1,1,1)},{easing:"quadOut"}).to(.4,{position:new a(0,70,0)}).to(.2,{scale:new a(0,0,0)},{easing:"quadIn"}).call((function(){return e.destroy()})).start()}},e.animateScoreChange=function(t,e,s){var n=this;void 0===s&&(s=1);var a=t;o({value:a}).to(s,{value:e},{easing:"cubicOut",onUpdate:function(t){a=Math.round(t.value),n.scoreLabel.string=""+a}}).start()},e.updateResult=function(t){t?console.log("You Win!"):console.log("Game Over!")},t}());e._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});